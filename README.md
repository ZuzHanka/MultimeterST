# MultimeterST

This project contains three different application firmwares:

- Multimeter - terminal (serial port or USB) application which supports:
               4 configurable ADC channels, 2 configurable PWM channels
               (if supported) and one 1 configurable DAC channel (if supported)
- Tester - application for measuring ADC input capacitance on other MCU board
- Slave	 - application which shall run on the measured MCU board (examined by
           Tester)

## Limitations (current version):
- Tester application supports Nucleo-F303RE board only
- PWM and DAC are supported by Nucleo-F303RE board only
- ADC Vref and temperature channels, channel calibration etc. should be
  incomplete for some boards (complete and tested for Nucleo-F303RE board only)

## Directory structure
- `3party` - ST HAL libraries
- `doc` - some screenshots documenting project configuration in STM32CubeIDE
- `proj` - STM32CubeIDE projects (project name equals to the board name,
           build targets correspondst to firmware applications)
- `src` - application firmware source files

## STM32CubeIDE project structure

- `*.ioc` - STM32CubeMx configuration file (main board support configuration)
- `Core` - STM32CubeMx generated files + board support for applications
  - `Src/bsp.cpp` - board support implementation
  - `Inc/bsp_conf.hpp` - board specific configuration
- `Drivers` - ST HAL and other libraries (links generated by STM32CubeMx)
- `src` - application source files
  - `bsp.hpp` - board support interface
  - `multimeter` - source code specific for Multimeter application
  - `tester` - source code specific for Tester application
  - `slave` - source code specific for Slave application
- `* - Debug` - compiled output files
  - `*.hex` - should be loaded to MCU using ST-link

## STM32CubeIDE build + debug

- import project into the IDE
- select specific build configuration - each configuration corresponds to
  specific application
- build
- before first run the debugger configuration must be imported and fixed
  - (in IDE) double click `*.launch` file and open it (this is workaroung of
    IDE's "feature")
  - open "Debug configurations..." and find and select the right configuration
  - in Debugger folder - set correct "ST-LINK S/N" (or uncheck the checkbox)
  - if you debug more boards simultaneously, change "Port number" in the
    Debugger folder

If the above instructions does not work, consult STM32CubeIDE documentation.
